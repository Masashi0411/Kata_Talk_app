# カタトーク – エンジニア向け「話し方ドリル」CGM
### 画面遷移図
[Figma](https://www.figma.com/board/1bgyuzOPJ65HGPDn6LEEYY/0722_%E3%81%B2%E3%81%A8%E3%81%93%E3%81%A8%E7%B7%B4%E7%BF%92%E3%82%A2%E3%83%97%E3%83%AA_UI%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB%E5%9B%B3?node-id=0-1&t=FEqB2HPt1QjFxu43-1)

### プロトタイプ
[プロトタイプ](https://www.figma.com/proto/YZ9ve4nXgmrZyQEYu0veSV/0731_%E3%82%AB%E3%82%BF%E3%83%88%E3%83%BC%E3%82%AF_%E3%83%97%E3%83%AD%E3%83%88%E3%82%BF%E3%82%A4%E3%83%97?node-id=21-53&t=UYPJtOQASxT7jInW-0&scaling=scale-down&content-scaling=fixed&starting-point-node-id=21%3A53)

> ### こういう視点で使ってみてください！
>
> 1. **見た目の第一印象**：何をする画面かすぐに分かりましたか？
> 2. **操作の流れ**：ボタンを押してから次に何が起こるかスムーズに理解できましたか？
> 3. **文言の分かりやすさ**：説明やラベルは自然に読めましたか？
> 4. **押しやすさ**：ボタンのサイズ・配置にストレスはありませんか？
> 5. **全体感**：画面間でデザインや操作感のズレは感じませんか？
>
> 気づいた点や改善アイデアがあれば、ぜひコメント欄に書いてください！

---


---

## ■ サービス概要（3 行）

1. 毎朝 30 秒で TIP（話し方の型）を読み、150 字でドリルへの回答を投稿できる Web アプリです。
2. 投稿後に自己評価し、他ユーザーの回答と比較することで短時間で“型”を習得します。
3. テキスト習慣を土台に、将来は音声提出や AI フィードバックへ段階的に拡張できます。

---

## ■ このサービスへの思い・作りたい理由

- **原体験** : 提案した技術内容がうまく伝わらず、次のアクションにつながらない場面を何度も経験し、〈技術力 × 伝える力 = 価値〉を痛感しました。
- **着想** : 『最強のエンジニアになるための話し方の教科書』の TIP を “毎日 3 分で実践” できれば効果的と考え、「読む → 書く → 自己評価 → 他者比較」の学習サイクルを Web ドリル化しました。
- **狙い** : 声より先に **構造化された言語化力** を鍛え、誰でも短期間で職場のコミュニケーションを円滑にできるようにします。

---

## ■ ユーザー層について

| ペルソナ                 | 理由                                         |
| -------------------- | ------------------------------------------ |
| 若手〜中堅エンジニア（経験 1〜5 年） | 技術レビューやタスク調整で “伝わらない” 壁に直面しやすく、短時間学習ニーズが高い |

---

## ■ サービスの利用イメージ

1. **出社前** : ダッシュボードで “今日の TIP” を 30 秒で読む。
2. **通勤中（3 分）** : スマホで **カタタスク** に 150 字でドリルへの回答 → 自己評価を保存。
3. **昼休み（2 分）** : タイムラインで他ユーザーの回答を 3 件読み、良例をブックマーク。
4. **退勤前（1 分）** : **振り返り** に学びを追記し、翌日の改善点をセット。

この 1 周を毎日回すことで **言語化速度と型適用力** を自然に向上できます。

---

## ■ ユーザーの獲得について

| 施策                  | 詳細                                     |
| ------------------- | -------------------------------------- |
| Tech ブログ / Qiita 記事 | 「30 秒話し方ドリル実践ログ」を連載し、TIP の有用性を体験談として発信 |
| Twitter（X）Bot       | 毎朝 7:00 に “今日の TIP” を自動ポストし、カジュアル導線を提供 |

---

## ■ サービスの差別化ポイント・推しポイント

| 観点     | カタトーク                                | 既存サービス（書籍・音声特化アプリ等） |
| ------ | ------------------------------------ | ------------------- |
| 学習サイクル | 読む → 書く → 自己評価 → 他者比較の **4 ステップ一体型** | 読む／聞くだけ、投稿が断片的      |
| 所要時間   | 1 ドリル 3 分で完結                         | 10–30 分の動画／音声が多い    |
| CGM 価値 | 回答例が毎日増え、TIP × シナリオのデータセットが拡張        | コンテンツ更新が運営依存        |
| 拡張性    | pgvector + AI 判定で音声・レコメンドを段階追加       | 拡張不可またはクローズド        |

---

## ■ 技術スタック

| レイヤー    | 採用技術                                     |
| ------- | ---------------------------------------- |
| 言語 / FW | Ruby 3.1.4 / **Rails 7.1**               |
| 認証      | **Devise**（メール認証・リセット / Omniauth 拡張余地）   |
| DB      | PostgreSQL 15 (pgvector 拡張)              |
| キュー     | Redis + Sidekiq                          |
| AI API  | OpenAI GPT-4o / Whisper                  |
| フロント    | Hotwire (Turbo / Stimulus) + TailwindCSS |
| インフラ    | Docker Compose (dev) / Render.com (本番)   |
| CI      | GitHub Actions (RSpec + RuboCop)         |

---

## ■ 用語と数え方

| 用語   | 定義                                         | 1 TIP とどう結びつくか                                    |
| ---- | ------------------------------------------ | ------------------------------------------------- |
| TIP  | 話し方の「型」そのもの（例: 30 秒「Yes &」（共感→付加質問））       | `tips` テーブルで一意に管理                                 |
| シナリオ | TIP を実践する状況設定（例: テストが終わらないと相談された）          | `scenarios` テーブルが `tip_id` を持ち、**1 TIP : N シナリオ** |
| ドリル  | 毎日配信される **TIP × シナリオ** の組み合わせ。ユーザーが回答を書く単位 | **1 ドリル = 1 シナリオ**（TIP はシナリオに紐付く）                 |

---

## ■ コンテンツ拡張計画

- **初期投入量**：20TIP、40シナリオ（1TIPにつき2シナリオ）＝40ドリルを Seed（管理画面 CRUD で随時追加可能）。
- **ユーザー投稿（UGC）**：ベータテスター 10 人想定 → **約 10 件/日** の回答例。足りない場合は運営が 5 件/日 追加。
- **AI 生成シナリオ**：本リリース後に `DailyScenarioJob` が GPT‑4o へ問い合わせ、**1 件/日** 自動追加（コスト \~0.025 USD/件）。
- **キュレーション**：Like 上位 10% & NG フィルタ通過投稿を `best_answer_examples` に昇格し、高品質例として優先表示。
- **タイマー**：MVP では目安表示のみ。本リリースで「3 分カウントダウン」をオプション提供（集中 & 過学習防止、OFF も可）。

---

## ■ 機能候補

### MVP リリース（Sprint 1–2）

- 会員登録 / ログイン（Devise）
- ダッシュボード：今日の TIP 表示
- **カタタスク** 投稿フォーム（Markdown 対応）
- 自己評価保存
- タイムライン & Like
- Admin：TIP CRUD（ActiveAdmin）

### 本リリース（Sprint 3 以降）

- AI 判定（OpenAI GPT）で型忠実度スコア
- 音声提出（ActiveStorage + Whisper）
- ブックマーク & フォルダ機能
- レコメンド：類似課題 / TIP 提案（pgvector）
- 経験値（XP）システムとレベル表示
- リマインド通知（メール / Web Push）
- タイマー機能（3 分カウントダウン、任意で無効化可）
- AI 生成シナリオ（DailyScenarioJob による 1 件/日 自動追加）
- バッジ解放（コイン使用）

---

## ■ 機能の実装方針予定（非 CRUD）

| 機能          | 技術スタック / Gem / API                        | 実装イメージ                                                  |
| ----------- | ----------------------------------------- | ------------------------------------------------------- |
| AI 型判定      | `openai-ruby` + Sidekiq                   | `カタタスク::Checker` で正規表現 → GPT 補完判定。Turbo Stream で結果 PUSH |
| 音声文字起こし     | Whisper API + ActiveStorage Direct Upload | 投稿後ジョブで mp3 → text 化し、TIP キーワードを検出                      |
| リアルタイム Like | Hotwire + Turbo Stream                    | `after_create_commit` で Like 数を即時ブロードキャスト               |
| レコメンド       | pgvector + cosine similarity              | 過去回答の埋め込みと近い TIP を `ORDER BY embedding <-> $1` で取得      |
| レート制限 & 通報  | Rack::Attack + `Reportable` concern       | 1 分 10 投稿でブロック、NG ワード検出時に自動非公開                          |

---

## ■ デモプレイ（約 3 分で 1 サイクル）

### ① ダッシュボード（30 秒）

```
┌────────────────────────────┐
│  おはよう、まさくん！
├────────────────────────────┤
│  📘 今日の TIP  [第Ⅱ章‑2 30秒 YES＆] │
│────────────────────────────│
│  相手の主張を肯定 ➕ 質問で広げよう │
└────────────────────────────┘
         [ 今すぐ実践 ▶ ]
```

### ② カタタスク投稿（60 秒）

```
📝 今日のドリル
──────────────────────────
シナリオ:
  チームメンバーが「テストが終わりません」と相談
お題:
  30 秒以内に YES＆ で返答を作成
──────────────────────────
| あなたの回答 (150 字以内) |
| 「わかる、その気持ち分かるよ。どのテストケースが   |
|  一番時間を取っているか教えてもらえる？」            |
──────────────────────────
            { 投稿する }
```

投稿完了通知: 保存が完了しました

### ③ 自己評価 & 振り返り（30 秒）

```
自己評価
─────────────────
◆ 自信度       ★★★☆☆
◆ 型の忠実度   ★★★★☆
◆ 学びメモ
  「肯定→質問の順」でラポール（信頼関係）が作りやすい
─────────────────
        { 保存して次へ }
```

### ④ タイムラインで他者比較（30 秒）

```
🔥 今日のハイライト（Like 順）
1. @dev_taro  👍 10
   「そうだよね、品質は守りたいよね。その上でいま最も時間を取っているテストはどこ？」
2. @rin_ruby  👍 8
   「共感するよ！まず一番時間がかかっているテストケースを一緒に洗い出そうか？」
3. @sora_js   👍 7
   「わかる、私も同じ立場なら焦るよ。どこを優先的に手伝えばいいかな？」
```

> これで **読む → 書く → 自己評価 → 他者比較** が完了。 習慣化することで“話し方の型”が自然に定着します。

---

> **更新履歴**
>
> - 2025-07-11: README 初版作成
> - 2025-07-11: 体裁調整 & 用語統一

- 2025-07-12: 本リリース機能にタイマー機能と AI 生成シナリオ機能を追記

