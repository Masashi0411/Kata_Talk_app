<%= render "shared/common_header" %>

<main class="bg-background min-h-screen pb-20 px-4 pt-4">
  <h1 class="text-heading-lg font-semibold text-textPrimary mb-4">今日のひとこと一覧</h1>

  <!-- 並べ替えタブ -->
  <div class="flex gap-4 mb-6">
    <%= link_to "新着順", tips_path(order: :recent),
          class: "tab #{params[:order] != 'likes' ? 'active' : ''}" %>
    <%= link_to "投稿数", tips_path(order: :likes),
          class: "tab #{params[:order] == 'likes' ? 'active' : ''}" %>
  </div>

  <!-- TIPカード一覧 -->
  <div class="space-y-4">
    <% @tips.each_with_index do |tip, i| %>
      <%= link_to drills_path(tip_id: tip.id),
                  class: "block bg-surface shadow-sm rounded-lg p-4 border border-neutralGray" do %>
        <!-- タイトル -->
        <h3 class="text-body-md font-semibold text-textPrimary">
          <%= h tip.title %>
        </h3>
        <!-- 説明文（追加） -->
        <p class="text-body-md text-textSecondary mt-2">
          <%= h((tip.description.presence || "準備中")).truncate(80) %>
        </p>
        <!-- メタ情報（既存どおり） -->
        <p class="text-label-sm text-textSecondary mt-1">
          投稿日: <%= l(tip.scheduled_date) %>　投稿数: <%= tip.posts.count %>
        </p>
      <% end %>

      <% if (i + 1) % 5 == 0 %>
        <div class="bg-neutralGray/20 text-center py-6 rounded-lg">[AdBannerInline]</div>
      <% end %>
    <% end %>
  </div>
</main>

<%= render "shared/common_footer" %>
