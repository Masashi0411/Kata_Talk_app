<h1 class="text-2xl font-bold">今日のひとこと</h1>

<% if @tip.present? %>
  <div class="mt-4 p-4 border rounded-xl bg-white">
    <div class="text-sm text-gray-500">
      <%= l(@tip.scheduled_date, format: :long) %>
    </div>
    <p class="mt-2 whitespace-pre-wrap"><%= @tip.content %></p>
  </div>

  <!-- 投稿フォーム -->
  <div class="mt-6">
    <h2 class="text-lg font-semibold">あなたのひとことを投稿</h2>

    <% if flash[:alert] %>
      <p class="mt-2 text-sm text-red-600"><%= flash[:alert] %></p>
    <% end %>

    <%= form_with(model: @post, url: posts_path, method: :post, class: "mt-3 space-y-3") do |f| %>
      <%= f.hidden_field :tip_id, value: @tip.id %>

      <div>
        <label class="block text-sm text-gray-600">ニックネーム（任意）</label>
        <%= f.text_field :display_nickname, class: "border rounded px-3 py-2 w-full", maxlength: 30 %>
      </div>

      <div>
        <label class="block text-sm text-gray-600">ひとこと（150字まで）</label>
        <%= f.text_area :content, rows: 3, maxlength: 150, class: "border rounded px-3 py-2 w-full" %>
        <p class="mt-1 text-xs text-gray-500">※ 公開タイムラインに表示されます</p>
      </div>

      <%= f.submit "投稿する", class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>
    <% end %>
  </div>
<% else %>
  <p class="mt-4 text-gray-600">表示できる Tip がまだありません。管理画面や seed で作成してください。</p>
<% end %>
